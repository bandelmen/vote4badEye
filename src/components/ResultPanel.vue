<template>
  <div class="weekly-section">
    <h1 class="section-title">æœ¬å‘¨çƒ‚çœ¼å„¿æ’å</h1>
    <div class="medal-container">
      <div v-for="(user, index) in topThreeTotalResults" :key="index" class="user-info-weekly">
        <div v-if="index === 0" class="medal silver-medal">{{ getRankEmoji(1) }}</div>
        <div v-else-if="index === 1" class="medal gold-medal">{{ getRankEmoji(0) }}</div>
        <div v-else class="medal bronze-medal">{{ getRankEmoji(2) }}</div>
        <div class="user-details">
          <div class="user-detail-name">{{ user.name }}</div>
          <div class="user-detail-vote_num">æ€»ç¥¨æ•°: {{ user.totalVotes }}</div>
        </div>
      </div>
    </div>
  </div>

  <hr class="divider" />

  <div class="history-section">
    <h1 class="section-title">å†å²æ€»è®¡æ’å</h1>
    <div v-for="(user, index) in totalResults" :key="index" class="user-info-history">
      <div class="history-section-left">
        <div class="medal">{{ getRankEmoji(index) }}</div>
        <el-avatar class="user-detail-avatar" :size="30" :src="user.avatar" />
        <div class="user-detail-name">{{ user.name }}</div>
      </div>
      <div class="user-detail-vote_num">æ€»ç¥¨æ•°: {{ user.totalVotes }}</div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'ResultPanel',
  data() {
    return {
      weeklyResults: [
        {
          id: 1,
          name: 'æ‘©æ´›å“¥ç…é¥¼',
          totalVotes: 7,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 2,
          name: 'æ·è±¹',
          totalVotes: 4,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 3,
          name: 'kaoyah',
          totalVotes: 9,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 4,
          name: 'XiaoC',
          totalVotes: 2,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 5,
          name: 'å¼ºå°‘',
          totalVotes: 11,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 6,
          name: 'å¸¦å“¥',
          totalVotes: 6,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 7,
          name: 'å°§å°§',
          totalVotes: 8,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 8,
          name: 'AC',
          totalVotes: 5,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 9,
          name: 'é˜¿è¾‰',
          totalVotes: 10,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 10,
          name: 'é˜¿æ˜',
          totalVotes: 3,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 11,
          name: 'side',
          totalVotes: 12,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
      ],
      totalResults: [
        {
          id: 1,
          name: 'æ‘©æ´›å“¥ç…é¥¼',
          totalVotes: 17,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 2,
          name: 'æ·è±¹',
          totalVotes: 24,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 3,
          name: 'kaoyah',
          totalVotes: 19,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 4,
          name: 'XiaoC',
          totalVotes: 21,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 5,
          name: 'å¼ºå°‘',
          totalVotes: 17,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 6,
          name: 'å¸¦å“¥',
          totalVotes: 13,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 7,
          name: 'å°§å°§',
          totalVotes: 38,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 8,
          name: 'AC',
          totalVotes: 15,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 9,
          name: 'é˜¿è¾‰',
          totalVotes: 18,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 10,
          name: 'é˜¿æ˜',
          totalVotes: 21,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
        {
          id: 11,
          name: 'side',
          totalVotes: 32,
          avatar: require('../assets/images/æ‘©æ´›å“¥ç…é¥¼.jpg'),
        },
      ],
    };
  },
  computed: {
    sortedUsers() {
      return this.weeklyResults.slice().sort((a, b) => {
        if (a.totalVotes !== b.totalVotes) {
          return b.totalVotes - a.totalVotes; // æŒ‰ç…§æ€»ç¥¨æ•°é™åºæ’åˆ—
        } else {
          return a.name.localeCompare(b.name); // å¦‚æœæ€»ç¥¨æ•°ç›¸åŒï¼ŒæŒ‰å­—æ¯é¡ºåºæ’åˆ—
        }
      });
    },
    topThreeTotalResults() {
      const sortedUsers = this.sortedUsers.slice(0, 3);
      if (sortedUsers.length === 3) {
        const temp = sortedUsers[0];
        sortedUsers[0] = sortedUsers[1];
        sortedUsers[1] = temp;
      }
      return sortedUsers;
    },
  },
  methods: {
    getRankEmoji(index) {
      if (index === 0) return 'ğŸ¥‡'; // é‡‘ç‰Œ
      if (index === 1) return 'ğŸ¥ˆ'; // é“¶ç‰Œ
      if (index === 2) return 'ğŸ¥‰'; // é“œç‰Œ
      return index + 1;
    },
  },
};
</script>

<style>
.medal-container {
  display: flex;
  justify-content: space-around;
  margin-bottom: 10px;
}

.user-info-weekly {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 10px;
  width: 31%;
  border-radius: 5px;
  background-color: #f5f5f5;
}

.section-title {
  margin-top: 10px;
  margin-bottom: 10px;
}

.history-section-left {
  display: flex;
  align-items: center;
}

.user-detail-avatar {
  margin-right: 10px;
}

.user-info-history {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  padding: 10px;
  background-color: #f5f5f5;
  border-radius: 4px;
  height: 40px;
}

.medal {
  font-size: 18px;
  margin-right: 15px;
  text-align: center;
  flex-shrink: 0;
  width: 30px;
}

.gold-medal {
  font-size: 35px; /* é‡‘ç‰Œè¾ƒå¤§ */
}

.silver-medal {
  font-size: 28px; /* é“¶ç‰Œä¸­ç­‰å¤§å° */
}

.bronze-medal {
  font-size: 24px; /* é“œç‰Œè¾ƒå° */
}

.user-detail-name {
  font-size: 18px;
}

.user-detail-vote_num {
  margin: 0;
  color: #777;
  font-size: 14px;
}
</style>
